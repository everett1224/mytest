#include <stdio.h>
#include <stdlib.h>

typedef void(*swaaap)(int*, int*);

void function(int a)
{
	printf("the a is %d\n", a);
}

int main()
{
	int a =1;
	int b = 2;
//sigmfault//	((void(*)(int*,int*))"\x8b\x44\x24\x04\x8b\x5c\x24\x08\x8b\x00\x8b\x1b\x31\xc3\x31\xd8\x31\xc3\x8b\x4c\x24\x04\x89\x01\x8b\x4c\x24\x08\x89\x19\xc3 <- This swaps the values of a and b")(&a,&b);

//	((swaaap)"\x8b\x44\x24\x04\x8b\x5c\x24\x08\x8b\x00\x8b\x1b\x31\xc3\x31\xd8\x31\xc3\x8b\x4c\x24\x04\x89\x01\x8b\x4c\x24\x08\x89\x19\xc3 <- This swaps the values of a and b")(&a,&b);
//	void * ff = malloc(sizeof("\x8b\x44\x24\x04\x8b\x5c\x24\x08\x8b\x00\x8b\x1b\x31\xc3\x31\xd8\x31\xc3\x8b\x4c\x24\x04\x89\x01\x8b\x4c\x24\x08\x89\x19\xc3 <- This swaps the values of a and b"));
	
//	((swaaap)ff)(&a, &b);
	
//	int eax = 1024;
	
//	eax = ((int(*)())("\xc3 <- This returns the value of the EAX register"))();

//	printf("the EAX is %X\n", eax);
	
//	((int(*)())"\x66\x31\xc0\x8b\x5c\x24\x04\x66\x40\x50\xff\xd3\x58\x66\x3d\xe8\x03\x75\xf4\xc3")(&function); // calls function with 1->1000
	
	
//	const char* lol = "\x8b\x5c\x24\x4\x3d\xe8\x3\x0\x0\x7e\x2\x31\xc0\x83\xf8\x64\x7d\x6\x40\x53\xff\xd3\x5b\xc3\xc3 <- Recursively calls the function at address lol.";
//	int i = ((int(*)())(lol))(lol);
	
	char str[] = {"\x8b\x44\x24\x04\x8b\x5c\x24\x08\x8b\x00\x8b\x1b\x31\xc3\x31\xd8\x31\xc3\x8b\x4c\x24\x04\x89\x01\x8b\x4c\x24\x08\x89\x19\xc3 <- This swaps the values of a and b"};
	
	((swaaap)str)(&a, &b);
	
	printf("a is %d\n",a);

	printf("b is %d\n", b);

//	free(ff);
	return 0;

}
